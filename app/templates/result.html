{% extends "base.html" %}
{% block title %}RÃ©sultat - Question {{ question_number }}{% endblock %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="background: #e9ecef; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
        <h2>RÃ©sultat - Question {{ question_number }} / {{ total_questions }}</h2>
    </div>

    <div style="background: {% if evaluation.score_letter == 'A' %}#d4edda{% elif evaluation.score_letter == 'B' %}#fff3cd{% else %}#f8d7da{% endif %}; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
        <h3>Score: {{ evaluation.score_letter }}{% if evaluation.score_letter == 'A' %} (Excellent){% elif evaluation.score_letter == 'B' %} (Correct){% else %} (Ã€ revoir){% endif %}</h3>
        <h4>Feedback</h4>
        <p>{{ evaluation.feedback }}</p>
    </div>

    {% if evaluation.educational_content %}
    <div style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
        <h3>ðŸ“š Contenu Ã‰ducatif</h3>
        <p style="line-height: 1.6;">{{ evaluation.educational_content }}</p>

        {% if evaluation.recommendation %}
        <div style="margin-top: 15px; padding: 10px; background: #e9ecef; border-radius: 3px;">
            <h4>Recommandation</h4>
            <p style="font-size: 14px; line-height: 1.5;">{{ evaluation.recommendation.recommendation }}</p>
            {% if evaluation.recommendation.references %}
            <p style="font-size: 12px; color: #666; margin-top: 10px;">
                <strong>RÃ©fÃ©rences:</strong> {{ evaluation.recommendation.references }}
            </p>
            {% endif %}
        </div>
        {% endif %}
    </div>
    {% endif %}

    {% if question_number < total_questions %}
    <form method="POST" action="{% if contest_type == 'national' %}{{ url_for('national.next_question') }}{% else %}{{ url_for('personal.next_question') }}{% endif %}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <button type="submit" style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer;">
            Question suivante ({{ question_number + 1 }}/{{ total_questions }})
        </button>
    </form>
    {% else %}
    <div style="text-align: center; margin-top: 30px;">
        <h3>ðŸŽ‰ Quiz terminÃ© !</h3>
        <a href="{% if contest_type == 'national' %}{{ url_for('national.results') }}{% else %}{{ url_for('personal.results') }}{% endif %}"
           style="display: inline-block; padding: 12px 24px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; font-size: 16px;">
            Voir les rÃ©sultats finaux
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
